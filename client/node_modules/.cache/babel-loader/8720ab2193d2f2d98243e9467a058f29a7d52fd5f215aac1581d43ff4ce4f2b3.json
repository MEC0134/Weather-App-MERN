{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{useCookies}from\"react-cookie\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import WeatherDisplay from\"./WeatherDisplay\";import ForecastCard from\"./components/ForecastCards\";import WeatherInfoCard from\"./components/WeatherInfoCard\";import LoadingSpinner from\"./components/LoadingSpinner\";import PrivateRoute from\"./components/PrivateRoute\";import'../css/PrivateRoutes.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=function Home(){var getToday=function getToday(){var daysOfWeek=[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"];var today=new Date().getDay();return daysOfWeek[today];};var today=getToday();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),joke=_useState4[0],setJoke=_useState4[1];var _useState5=useState({userCity:\"\"}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var _useState7=useState({Min:\"\",Max:\"\",Icon:\"\"}),_useState8=_slicedToArray(_useState7,2),forecast=_useState8[0],setForecast=_useState8[1];var _useState9=useState({temperature:\"\",description:\"\"}),_useState10=_slicedToArray(_useState9,2),weatherToday=_useState10[0],setWeatherToday=_useState10[1];var _useCookies=useCookies([]),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],removeCookie=_useCookies2[1];var navigate=useNavigate();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data,success,_user,userJoke,weatherForecast,todayWeather;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://clima-g901.onrender.com/user-data\",{withCredentials:true});case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;success=data.success,_user=data.user,userJoke=data.userJoke,weatherForecast=data.weatherForecast;todayWeather=weatherForecast[today];if(success){setJoke(userJoke);setUser({userCity:_user.UserChoice.City,userCuntry:_user.UserChoice.Country});setWeatherToday({temperature:todayWeather.temperature,description:todayWeather.description});setForecast(_objectSpread({},weatherForecast));setLoading(false);}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);setLoading(false);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[cookies,navigate,today]);var Logout=function Logout(){removeCookie(\"token\");navigate('/');};return/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{id:\"home-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"overlay-elements\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"weather-container\",children:loading?'':/*#__PURE__*/_jsx(WeatherInfoCard,{city:user.userCity,temperature:weatherToday.temperature,description:weatherToday.description})}),/*#__PURE__*/_jsx(\"div\",{className:\"joke-container\",children:/*#__PURE__*/_jsx(\"p\",{children:joke})}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-container\",children:loading?'':Object.keys(forecast).map(function(day,index){return/*#__PURE__*/_jsx(ForecastCard,{day:day,icon:forecast[day].Icon,min:forecast[day].Min,max:forecast[day].Max},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"logout\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-logout\",onClick:Logout,children:\"Logout\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"weather-component\",children:loading?/*#__PURE__*/_jsx(LoadingSpinner,{}):/*#__PURE__*/_jsx(WeatherDisplay,{description:weatherToday.description})})]})})});};export default Home;","map":{"version":3,"names":["useState","useEffect","useCookies","useNavigate","axios","WeatherDisplay","ForecastCard","WeatherInfoCard","LoadingSpinner","PrivateRoute","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","getToday","daysOfWeek","today","Date","getDay","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","joke","setJoke","_useState5","userCity","_useState6","user","setUser","_useState7","Min","Max","Icon","_useState8","forecast","setForecast","_useState9","temperature","description","_useState10","weatherToday","setWeatherToday","_useCookies","_useCookies2","cookies","removeCookie","navigate","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","success","_user","userJoke","weatherForecast","todayWeather","wrap","_callee$","_context","prev","next","get","withCredentials","sent","UserChoice","City","userCuntry","Country","_objectSpread","t0","console","log","stop","apply","arguments","Logout","children","id","className","city","Object","keys","map","day","index","icon","min","max","onClick"],"sources":["C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/src/pages/Home.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport WeatherDisplay from \"./WeatherDisplay\";\r\nimport ForecastCard from \"./components/ForecastCards\";\r\nimport WeatherInfoCard from \"./components/WeatherInfoCard\";\r\nimport LoadingSpinner from \"./components/LoadingSpinner\";\r\nimport PrivateRoute from \"./components/PrivateRoute\";\r\nimport '../css/PrivateRoutes.css';\r\n\r\n\r\nconst Home = () => {\r\n\r\n  const getToday = () => {\r\n    const daysOfWeek = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n    const today = new Date().getDay();\r\n    return daysOfWeek[today];\r\n  };\r\n\r\n  const today = getToday();\r\n  const [loading, setLoading] = useState(true);\r\n  const [joke, setJoke] = useState(\"\");\r\n  const [user, setUser] = useState({\r\n    userCity: \"\"\r\n  });\r\n\r\n  const [forecast, setForecast] = useState({\r\n    Min: \"\",\r\n    Max: \"\",\r\n    Icon: \"\"\r\n  });\r\n\r\n  const [weatherToday, setWeatherToday] = useState({\r\n    temperature: \"\",\r\n    description: \"\"\r\n  });\r\n\r\n  const [cookies, removeCookie] = useCookies([]);\r\n  const navigate = useNavigate();\r\n\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n\r\n      try {\r\n\r\n        const { data } = await axios.get(\"https://clima-g901.onrender.com/user-data\", { withCredentials: true });\r\n        const { success, user, userJoke, weatherForecast } = data;\r\n        const todayWeather = weatherForecast[today];\r\n\r\n        if (success) {\r\n          setJoke(userJoke);\r\n          setUser({ userCity: user.UserChoice.City, userCuntry: user.UserChoice.Country });\r\n          setWeatherToday({\r\n            temperature: todayWeather.temperature,\r\n            description: todayWeather.description,\r\n          });\r\n          setForecast({ ...weatherForecast });\r\n          setLoading(false);\r\n        }\r\n\r\n      } catch (error) {\r\n        console.log(error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n  }, [cookies, navigate, today]);\r\n\r\n\r\n  const Logout = () => {\r\n    removeCookie(\"token\");\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <PrivateRoute>\r\n      <>\r\n\r\n        <div id=\"home-container\">\r\n\r\n          <div className=\"overlay-elements\">\r\n\r\n            <div className=\"weather-container\">\r\n              {loading ? (\r\n                ''\r\n              ) : (\r\n                <WeatherInfoCard\r\n                  city={user.userCity}\r\n                  temperature={weatherToday.temperature}\r\n                  description={weatherToday.description}\r\n                />\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"joke-container\">\r\n              <p>{joke}</p>\r\n            </div>\r\n\r\n            <div className=\"forecast-container\">\r\n              {loading ? (\r\n                ''\r\n              ) : (\r\n                Object.keys(forecast).map((day, index) => (\r\n                  <ForecastCard\r\n                    key={index}\r\n                    day={day}\r\n                    icon={forecast[day].Icon}\r\n                    min={forecast[day].Min}\r\n                    max={forecast[day].Max}\r\n                  />\r\n                ))\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"logout\">\r\n              <button className=\"btn btn-primary btn-logout\" onClick={Logout}>Logout</button>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <div className=\"weather-component\">\r\n            {loading ? (\r\n              <LoadingSpinner />\r\n            ) : (\r\n              <WeatherDisplay description={weatherToday.description} />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </>\r\n    </PrivateRoute>\r\n  )\r\n}\r\n\r\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}