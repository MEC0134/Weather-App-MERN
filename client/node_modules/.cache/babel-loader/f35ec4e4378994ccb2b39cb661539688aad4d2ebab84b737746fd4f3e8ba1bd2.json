{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useMemo}from\"react\";import{useCookies}from\"react-cookie\";import{useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import axios from\"axios\";var PrivateRoute=function PrivateRoute(_ref){var children=_ref.children;var _useCookies=useCookies([]),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],removeCookie=_useCookies2[1];var navigate=useNavigate();var handleError=function handleError(err){return toast.error(err,{position:\"bottom-right\"});};var verifyCookie=useMemo(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$post,data,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!cookies.token){navigate(\"/login\");}_context.next=3;return axios.post(\"http://localhost:8000/private-request\",{},{withCredentials:true});case 3:_yield$axios$post=_context.sent;data=_yield$axios$post.data;status=data.status;if(!status){removeCookie(\"token\");handleError(\"Please login first!\");navigate(\"/login\");}case 7:case\"end\":return _context.stop();}},_callee);})),[cookies,navigate,removeCookie]);return children;};export default PrivateRoute;","map":{"version":3,"names":["useMemo","useCookies","useNavigate","toast","axios","PrivateRoute","_ref","children","_useCookies","_useCookies2","_slicedToArray","cookies","removeCookie","navigate","handleError","err","error","position","verifyCookie","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$post","data","status","wrap","_callee$","_context","prev","next","token","post","withCredentials","sent","stop"],"sources":["C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/src/pages/components/PrivateRoute.js"],"sourcesContent":["import { useMemo } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport axios from \"axios\";\r\n\r\nconst PrivateRoute = ({ children }) => {\r\n    const [cookies, removeCookie] = useCookies([]);\r\n    const navigate = useNavigate();\r\n\r\n    const handleError = (err) =>\r\n        toast.error(err, {\r\n            position: \"bottom-right\",\r\n        });\r\n\r\n    const verifyCookie = useMemo(async () => {\r\n        if (!cookies.token) {\r\n            navigate(\"/login\");\r\n        }\r\n\r\n        const { data } = await axios.post(\r\n            \"http://localhost:8000/private-request\",\r\n            {},\r\n            { withCredentials: true }\r\n        );\r\n\r\n        const { status } = data;\r\n\r\n        if (!status) {\r\n            removeCookie(\"token\");\r\n            handleError(\"Please login first!\");\r\n            navigate(\"/login\");\r\n        }\r\n    }, [cookies, navigate, removeCookie]);\r\n\r\n    return children;\r\n};\r\n\r\nexport default PrivateRoute;\r\n"],"mappings":"wdAAA,OAASA,OAAO,KAAQ,OAAO,CAC/B,OAASC,UAAU,KAAQ,cAAc,CACzC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,KAAK,KAAQ,gBAAgB,CACtC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAC5B,IAAAC,WAAA,CAAgCP,UAAU,CAAC,EAAE,CAAC,CAAAQ,YAAA,CAAAC,cAAA,CAAAF,WAAA,IAAvCG,OAAO,CAAAF,YAAA,IAAEG,YAAY,CAAAH,YAAA,IAC5B,GAAM,CAAAI,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAE9B,GAAM,CAAAY,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIC,GAAG,QACpB,CAAAZ,KAAK,CAACa,KAAK,CAACD,GAAG,CAAE,CACbE,QAAQ,CAAE,cACd,CAAC,CAAC,GAEN,GAAM,CAAAC,YAAY,CAAGlB,OAAO,cAAAmB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAA,MAAAC,iBAAA,CAAAC,IAAA,CAAAC,MAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACzB,GAAI,CAACnB,OAAO,CAACoB,KAAK,CAAE,CAChBlB,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAACe,QAAA,CAAAE,IAAA,SAEsB,CAAA1B,KAAK,CAAC4B,IAAI,CAC7B,uCAAuC,CACvC,CAAC,CAAC,CACF,CAAEC,eAAe,CAAE,IAAK,CAC5B,CAAC,QAAAV,iBAAA,CAAAK,QAAA,CAAAM,IAAA,CAJOV,IAAI,CAAAD,iBAAA,CAAJC,IAAI,CAMJC,MAAM,CAAKD,IAAI,CAAfC,MAAM,CAEd,GAAI,CAACA,MAAM,CAAE,CACTb,YAAY,CAAC,OAAO,CAAC,CACrBE,WAAW,CAAC,qBAAqB,CAAC,CAClCD,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,wBAAAe,QAAA,CAAAO,IAAA,MAAAb,OAAA,GACJ,GAAE,CAACX,OAAO,CAAEE,QAAQ,CAAED,YAAY,CAAC,CAAC,CAErC,MAAO,CAAAL,QAAQ,CACnB,CAAC,CAED,cAAe,CAAAF,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}