{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import{toast}from\"react-toastify\";import\"./css/forms.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var navigate=useNavigate();var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var handleInput=function handleInput(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};var handleError=function handleError(err){return toast.error(err,{position:\"bottom-right\"});};var handleSuccess=function handleSuccess(msg){return toast.success(msg,{position:\"bottom-right\"});};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$axios$post,data,appSetUp,success,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"https://clima-g901.onrender.com/login\",_objectSpread({},formData),{withCredentials:true});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;appSetUp=data.appSetUp,success=data.success,message=data.message;if(!appSetUp&&success){handleSuccess(message);setTimeout(function(){navigate(\"/userSettings/\".concat(formData.username));},1000);}else{handleSuccess(message);setTimeout(function(){navigate('/home');},1000);}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);if(_context.t0.response.status===401){handleError(_context.t0.response.data.message);}else if(_context.t0.response.status===404){handleError(_context.t0.response.data.message);}console.log(_context.t0);case 14:setFormData({username:\"\",password:\"\"});case 15:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{id:\"register-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row align-items-center\",style:{height:\"87vh\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto col-8 col-md-6 col-lg-4 form-frame login-form\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"form-title\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-group\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:formData.username,className:\"form-control\",onChange:handleInput,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,className:\"form-control\",onChange:handleInput,required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"redirect-user\",children:[\"Don't have an account?\",/*#__PURE__*/_jsx(Link,{style:{textDecoration:\"none\"},to:\"/register\",children:\"Register\"})]})]})]})})});};export default Login;","map":{"version":3,"names":["React","useState","Link","useNavigate","axios","toast","jsx","_jsx","jsxs","_jsxs","Login","navigate","_useState","username","password","_useState2","_slicedToArray","formData","setFormData","handleInput","event","_event$target","target","name","value","_objectSpread","_defineProperty","handleError","err","error","position","handleSuccess","msg","success","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$post","data","appSetUp","message","wrap","_callee$","_context","prev","next","preventDefault","post","withCredentials","sent","setTimeout","concat","t0","response","status","console","log","stop","_x","apply","arguments","id","children","className","style","height","onSubmit","htmlFor","type","onChange","required","textDecoration","to"],"sources":["C:/Users/M.E.C/Desktop/WebDev/.Full-Stack Development/Clima/Client/src/pages/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"./css/forms.css\";\r\n\r\n\r\nconst Login = () => {\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const [formData, setFormData] = useState({\r\n        username: \"\",\r\n        password: \"\"\r\n    });\r\n\r\n    const handleInput = (event) => {\r\n        const { name, value } = event.target;\r\n        setFormData({\r\n            ...formData,\r\n            [name]: value\r\n        });\r\n    };\r\n\r\n    const handleError = (err) =>\r\n        toast.error(err, {\r\n            position: \"bottom-right\",\r\n        });\r\n    const handleSuccess = (msg) =>\r\n        toast.success(msg, {\r\n            position: \"bottom-right\",\r\n        });\r\n\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        try {\r\n            const { data } = await axios.post(\"https://clima-g901.onrender.com/login\", {\r\n                ...formData\r\n            }, { withCredentials: true });\r\n\r\n            const { appSetUp, success, message } = data;\r\n\r\n            if (!appSetUp && success) {\r\n                handleSuccess(message);\r\n                setTimeout(() => {\r\n                    navigate(`/userSettings/${formData.username}`);\r\n                }, 1000);\r\n            } else {\r\n                handleSuccess(message);\r\n                setTimeout(() => {\r\n                    navigate('/home');\r\n                }, 1000);\r\n            }\r\n\r\n        } catch (error) {\r\n            if (error.response.status === 401) {\r\n                handleError(error.response.data.message);\r\n            } else if (error.response.status === 404) {\r\n                handleError(error.response.data.message);\r\n            }\r\n            console.log(error);\r\n        }\r\n\r\n        setFormData({ username: \"\", password: \"\" });\r\n    }\r\n\r\n\r\n    return (\r\n        <div id=\"register-container\">\r\n            <div className=\"row align-items-center\" style={{ height: \"87vh\" }}>\r\n                <div className=\"mx-auto col-8 col-md-6 col-lg-4 form-frame login-form\">\r\n                    <h1 className=\"form-title\">Login</h1>\r\n                    <form className=\"form-group\" onSubmit={handleSubmit}>\r\n                        <label htmlFor=\"username\">Username</label>\r\n                        <input type=\"text\" name=\"username\" value={formData.username} className=\"form-control\" onChange={handleInput} required></input>\r\n                        <label htmlFor=\"password\">Password</label>\r\n                        <input type=\"password\" name=\"password\" value={formData.password} className=\"form-control\" onChange={handleInput} required></input>\r\n                        <button className=\"btn btn-primary\" type=\"submit\">Login</button>\r\n                        <p className=\"redirect-user\">Don't have an account?<Link style={{ textDecoration: \"none\" }} to={\"/register\"}>Register</Link></p>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}